<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>REopt Inputs · REopt.jl Documentation</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">REopt.jl Documentation</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">REopt</span><ul><li><a class="tocitem" href="../examples/">Examples</a></li><li class="is-active"><a class="tocitem" href>REopt Inputs</a><ul class="internal"><li><a class="tocitem" href="#Scenario"><span>Scenario</span></a></li><li><a class="tocitem" href="#BAUScenario"><span>BAUScenario</span></a></li><li><a class="tocitem" href="#Settings"><span>Settings</span></a></li><li><a class="tocitem" href="#Site"><span>Site</span></a></li><li><a class="tocitem" href="#ElectricLoad"><span>ElectricLoad</span></a></li><li><a class="tocitem" href="#ElectricTariff"><span>ElectricTariff</span></a></li><li><a class="tocitem" href="#Financial"><span>Financial</span></a></li><li><a class="tocitem" href="#ElectricUtility"><span>ElectricUtility</span></a></li><li><a class="tocitem" href="#PV"><span>PV</span></a></li><li><a class="tocitem" href="#Wind"><span>Wind</span></a></li><li><a class="tocitem" href="#ElectricStorage"><span>ElectricStorage</span></a></li><li><a class="tocitem" href="#Generator"><span>Generator</span></a></li><li><a class="tocitem" href="#ExistingBoiler"><span>ExistingBoiler</span></a></li><li><a class="tocitem" href="#CHP"><span>CHP</span></a></li><li><a class="tocitem" href="#AbsorptionChiller"><span>AbsorptionChiller</span></a></li><li><a class="tocitem" href="#Boiler"><span>Boiler</span></a></li><li><a class="tocitem" href="#HotThermalStorage"><span>HotThermalStorage</span></a></li><li><a class="tocitem" href="#ColdThermalStorage"><span>ColdThermalStorage</span></a></li><li><a class="tocitem" href="#DomesticHotWaterLoad"><span>DomesticHotWaterLoad</span></a></li><li><a class="tocitem" href="#SpaceHeatingLoad"><span>SpaceHeatingLoad</span></a></li><li><a class="tocitem" href="#FlexibleHVAC"><span>FlexibleHVAC</span></a></li><li><a class="tocitem" href="#ExistingChiller"><span>ExistingChiller</span></a></li><li><a class="tocitem" href="#GHP"><span>GHP</span></a></li><li><a class="tocitem" href="#SteamTurbine"><span>SteamTurbine</span></a></li></ul></li><li><a class="tocitem" href="../outputs/">Outputs</a></li><li><a class="tocitem" href="../methods/">Methods</a></li></ul></li><li><span class="tocitem">Model Predictive Control</span><ul><li><a class="tocitem" href="../../mpc/examples/">MPC Examples</a></li><li><a class="tocitem" href="../../mpc/inputs/">MPC Inputs</a></li><li><a class="tocitem" href="../../mpc/outputs/">MPC Outputs</a></li><li><a class="tocitem" href="../../mpc/methods/">Methods</a></li></ul></li><li><span class="tocitem">Developer</span><ul><li><a class="tocitem" href="../../developer/concept/">Design Concepts for the REopt Module</a></li><li><a class="tocitem" href="../../developer/organization/">File Organization</a></li><li><a class="tocitem" href="../../developer/inputs/">The REoptInputs structure</a></li><li><a class="tocitem" href="../../developer/adding_tech/">Adding a Technology</a></li><li><a class="tocitem" href="../../developer/documentation/">Documenting the Code</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">REopt</a></li><li class="is-active"><a href>REopt Inputs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>REopt Inputs</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL/REopt.jl/blob/master/docs/src/reopt/inputs.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="REopt-Inputs"><a class="docs-heading-anchor" href="#REopt-Inputs">REopt Inputs</a><a id="REopt-Inputs-1"></a><a class="docs-heading-anchor-permalink" href="#REopt-Inputs" title="Permalink"></a></h1><p>Inputs to <code>run_reopt</code> can be provided in one of four formats:</p><ol><li>a file path (string) to a JSON file,</li><li>a <code>Dict</code>, </li><li>using the <code>Scenario</code> struct, or</li><li>using the <code>REoptInputs</code> struct</li></ol><p>Any one of these types can be passed to the <a href="../methods/#run_reopt">run_reopt</a> method as shown in <a href="../examples/#Examples">Examples</a>.</p><p>The first option is perhaps the most straightforward. For example, the minimum requirements for a JSON scenario file would look like:</p><pre><code class="language-javascript">{
    &quot;Site&quot;: {
        &quot;longitude&quot;: -118.1164613,
        &quot;latitude&quot;: 34.5794343
    },
    &quot;ElectricLoad&quot;: {
        &quot;doe_reference_name&quot;: &quot;MidriseApartment&quot;,
        &quot;annual_kwh&quot;: 1000000.0
    },
    &quot;ElectricTariff&quot;: {
        &quot;urdb_label&quot;: &quot;5ed6c1a15457a3367add15ae&quot;
    }
}</code></pre><p>The order of the keys does not matter. Note that this scenario does not include any energy generation technologies and therefore the results can be used as a baseline for comparison to scenarios that result in cost-optimal generation technologies (alternatively, a user could include a <a href="#BAUScenario">BAUScenario</a> as shown in <a href="../examples/#Examples">Examples</a>).</p><p>To add PV to the analysis simply add a PV key with an empty dictionary (to use default values):</p><pre><code class="language-javascript">{
    &quot;Site&quot;: {
        &quot;longitude&quot;: -118.1164613,
        &quot;latitude&quot;: 34.5794343
    },
    &quot;ElectricLoad&quot;: {
        &quot;doe_reference_name&quot;: &quot;MidriseApartment&quot;,
        &quot;annual_kwh&quot;: 1000000.0
    },
    &quot;ElectricTariff&quot;: {
        &quot;urdb_label&quot;: &quot;5ed6c1a15457a3367add15ae&quot;
    },
    &quot;PV&quot;: {}
}</code></pre><p>This scenario will consider the option to purchase a solar PV system to reduce energy costs, and if solar PV can reduce the energy costs then REopt will provide the optimal PV capacity (assuming perfect foresight!). See <a href="#PV">PV</a> for all available input keys and default values for <code>PV</code>. To override a default value, simply specify a value for a given key. For example, the site under consideration might have some existing PV capacity to account for, which can be done by setting the <code>existing_kw</code> key to the appropriate value.</p><h2 id="Scenario"><a class="docs-heading-anchor" href="#Scenario">Scenario</a><a id="Scenario-1"></a><a class="docs-heading-anchor-permalink" href="#Scenario" title="Permalink"></a></h2><p>The <code>Scenario</code> struct captures all of the possible user input keys (see <a href="#REopt-Inputs">REopt Inputs</a> for potential input formats). A Scenario struct will be automatically created if a <code>Dict</code> or file path are supplied to the <a href="../methods/#run_reopt">run_reopt</a> method. Alternatively, a user can create a <code>Scenario</code> struct and supply this to <a href="../methods/#run_reopt">run_reopt</a>. </p><article class="docstring"><header><a class="docstring-binding" id="REopt.Scenario" href="#REopt.Scenario"><code>REopt.Scenario</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Scenario(d::Dict; flex_hvac_from_json=false)</code></pre><p>A Scenario struct can contain the following keys:</p><ul><li><a href="#Site">Site</a> (required)</li><li><a href="#Financial">Financial</a> (optional)</li><li><a href="#ElectricTariff">ElectricTariff</a> (required when <code>off_grid_flag=false</code>)</li><li><a href="#ElectricLoad">ElectricLoad</a> (required)</li><li><a href="#PV">PV</a> (optional, can be Array)</li><li><a href="#Wind">Wind</a> (optional)</li><li><a href="#ElectricStorage">ElectricStorage</a> (optional)</li><li><a href="#ElectricUtility">ElectricUtility</a> (optional)</li><li><a href="#Generator">Generator</a> (optional)</li><li><a href="#DomesticHotWaterLoad">DomesticHotWaterLoad</a> (optional)</li><li><a href="#SpaceHeatingLoad">SpaceHeatingLoad</a> (optional)</li><li><a href="#ExistingBoiler">ExistingBoiler</a> (optional)</li><li><a href="#Boiler">Boiler</a> (optional)</li><li><a href="#CHP">CHP</a> (optional)</li><li><a href="#FlexibleHVAC">FlexibleHVAC</a> (optional)</li><li><a href="#ExistingChiller">ExistingChiller</a> (optional)</li><li><a href="#AbsorptionChiller">AbsorptionChiller</a> (optional)</li><li><a href="#GHP">GHP</a> (optional, can be Array)</li><li><a href="#SteamTurbine">SteamTurbine</a> (optional)</li></ul><p>All values of <code>d</code> are expected to be <code>Dicts</code> except for <code>PV</code> and <code>GHP</code>, which can be either a <code>Dict</code> or <code>Dict[]</code> (for multiple PV arrays or GHP options).</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Set <code>flex_hvac_from_json=true</code> if <code>FlexibleHVAC</code> values were loaded in from JSON (necessary to  handle conversion of Vector of Vectors from JSON to a Matrix in Julia).</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/scenario.jl#L56-L85">source</a></section><section><div><pre><code class="language-none">Scenario(fp::String)</code></pre><p>Consruct Scenario from filepath <code>fp</code> to JSON with keys aligned with the <code>Scenario(d::Dict)</code> method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/scenario.jl#L569-L573">source</a></section></article><h2 id="BAUScenario"><a class="docs-heading-anchor" href="#BAUScenario">BAUScenario</a><a id="BAUScenario-1"></a><a class="docs-heading-anchor-permalink" href="#BAUScenario" title="Permalink"></a></h2><p>The Business-as-usual (BAU) inputs are automatically created based on the <code>BAUScenario</code> struct when a user supplies two <code>JuMP.Model</code>s to <code>run_reopt()</code> (as shown in <a href="../examples/#Examples">Examples</a>). The outputs of the BAU scenario are used to calculate comparative results such as the <code>Financial</code> net present value (<code>npv</code>).</p><article class="docstring"><header><a class="docstring-binding" id="REopt.BAUInputs" href="#REopt.BAUInputs"><code>REopt.BAUInputs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">BAUInputs(p::REoptInputs)</code></pre><p>The<code>BAUInputs</code> (REoptInputs for the Business As Usual scenario) are created based on the <code>BAUScenario</code>, which is in turn created based on the optimized-case <code>Scenario</code>.</p><p>The following assumptions are made for the BAU Inputs: </p><ul><li><code>PV</code> and <code>Generator</code> <code>min_kw</code> and <code>max_kw</code> set to the <code>existing_kw</code> values</li><li><code>ExistingBoiler</code> and <code>ExistingChiller</code>  # TODO</li><li>All other generation and storage tech sizes set to zero </li><li>Capital costs are assumed to be zero for existing <code>PV</code> and <code>Generator</code></li><li>O&amp;M costs and all other tech inputs are assumed to be the same for existing <code>PV</code> and <code>Generator</code> as those specified for the optimized case</li><li>Outage assumptions for deterministic vs stochastic # TODO </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/bau_inputs.jl#L30-L42">source</a></section></article><h2 id="Settings"><a class="docs-heading-anchor" href="#Settings">Settings</a><a id="Settings-1"></a><a class="docs-heading-anchor-permalink" href="#Settings" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.Settings" href="#REopt.Settings"><code>REopt.Settings</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Captures high-level inputs affecting the optimization.</p><p><code>Settings</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    time_steps_per_hour::Int = 1 # corresponds to the time steps per hour for user-provided time series (e.g., `ElectricLoad.loads_kw` and `DomesticHotWaterLoad.fuel_loads_mmbtu_per_hour`) 
    add_soc_incentive::Bool = true # when true, an incentive is added to the model&#39;s objective function to keep the ElectricStorage SOC high
    off_grid_flag::Bool = false # true if modeling an off-grid system, not connected to bulk power system
    include_climate_in_objective::Bool = false # true if climate costs of emissions should be included in the model&#39;s objective function
    include_health_in_objective::Bool = false # true if health costs of emissions should be included in the model&#39;s objective function</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/settings.jl#L30-L41">source</a></section></article><h2 id="Site"><a class="docs-heading-anchor" href="#Site">Site</a><a id="Site-1"></a><a class="docs-heading-anchor-permalink" href="#Site" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.Site" href="#REopt.Site"><code>REopt.Site</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Inputs related to the physical location:</p><p><code>Site</code> is a required REopt input with the following keys and default values:</p><pre><code class="language-julia">    latitude::Real, 
    longitude::Real, 
    land_acres::Union{Real, Nothing} = nothing, 
    roof_squarefeet::Union{Real, Nothing} = nothing,
    min_resil_time_steps::Int=0,
    mg_tech_sizes_equal_grid_sizes::Bool = true,
    node::Int = 1,
    CO2_emissions_reduction_min_fraction::Union{Float64, Nothing} = nothing,
    CO2_emissions_reduction_max_fraction::Union{Float64, Nothing} = nothing,
    bau_emissions_lb_CO2_per_year::Union{Float64, Nothing} = nothing,
    bau_grid_emissions_lb_CO2_per_year::Union{Float64, Nothing} = nothing,
    renewable_electricity_min_fraction::Real = 0.0,
    renewable_electricity_max_fraction::Union{Float64, Nothing} = nothing,
    include_exported_elec_emissions_in_total::Bool = true,
    include_exported_renewable_electricity_in_total::Bool = true,</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/site.jl#L30-L51">source</a></section></article><h2 id="ElectricLoad"><a class="docs-heading-anchor" href="#ElectricLoad">ElectricLoad</a><a id="ElectricLoad-1"></a><a class="docs-heading-anchor-permalink" href="#ElectricLoad" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.ElectricLoad" href="#REopt.ElectricLoad"><code>REopt.ElectricLoad</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ElectricLoad</code> is a required REopt input with the following keys and default values:</p><pre><code class="language-julia">    loads_kw::Array{&lt;:Real,1} = Real[],
    path_to_csv::String = &quot;&quot;, # for csv containing loads_kw
    year::Int = 2020, # used in ElectricTariff to align rate schedule with weekdays/weekends
    doe_reference_name::String = &quot;&quot;,
    blended_doe_reference_names::Array{String, 1} = String[],
    blended_doe_reference_percents::Array{&lt;:Real,1} = Real[],
    city::String = &quot;&quot;,
    annual_kwh::Union{Real, Nothing} = nothing,
    monthly_totals_kwh::Array{&lt;:Real,1} = Real[],
    critical_loads_kw::Union{Nothing, Array{Real,1}} = nothing,
    loads_kw_is_net::Bool = true,
    critical_loads_kw_is_net::Bool = false,
    critical_load_fraction::Real = off_grid_flag ? 1.0 : 0.5, # if off grid must be 1.0, else 0.5
    operating_reserve_required_fraction::Real = off_grid_flag ? 0.1 : 0.0, # if off grid, 10%, else must be 0%. Applied to each time_step as a % of electric load.
    min_load_met_annual_fraction::Real = off_grid_flag ? 0.99999 : 1.0 # if off grid, 99.999%, else must be 100%. Applied to each time_step as a % of electric load.</code></pre><div class="admonition is-info"><header class="admonition-header">Required inputs</header><div class="admonition-body"><p>Must provide either <code>loads_kw</code> or <code>path_to_csv</code> or [<code>doe_reference_name</code> and <code>city</code>] or <code>doe_reference_name</code> or [<code>blended_doe_reference_names</code> and <code>blended_doe_reference_percents</code>]. </p><p>When only <code>doe_reference_name</code> is provided the <code>Site.latitude</code> and <code>Site.longitude</code> are used to look up the ASHRAE climate zone, which determines the appropriate DoE Commercial Reference Building profile.</p><p>When using the [<code>doe_reference_name</code> and <code>city</code>] option, choose <code>city</code> from one of the cities used to represent the ASHRAE climate zones:</p><ul><li>Albuquerque</li><li>Atlanta</li><li>Baltimore</li><li>Boulder</li><li>Chicago</li><li>Duluth</li><li>Fairbanks</li><li>Helena</li><li>Houston</li><li>LosAngeles</li><li>Miami</li><li>Minneapolis</li><li>Phoenix</li><li>SanFrancisco</li><li>Seattle</li></ul><p>and <code>doe_reference_name</code> from:</p><ul><li>FastFoodRest</li><li>FullServiceRest</li><li>Hospital</li><li>LargeHotel</li><li>LargeOffice</li><li>MediumOffice</li><li>MidriseApartment</li><li>Outpatient</li><li>PrimarySchool</li><li>RetailStore</li><li>SecondarySchool</li><li>SmallHotel</li><li>SmallOffice</li><li>StripMall</li><li>Supermarket</li><li>Warehouse</li><li>FlatLoad # constant load year-round</li><li>FlatLoad<em>24</em>5 # constant load all hours of the weekdays</li><li>FlatLoad<em>16</em>7 # two 8-hour shifts for all days of the year; 6-10 a.m.</li><li>FlatLoad<em>16</em>5 # two 8-hour shifts for the weekdays; 6-10 a.m.</li><li>FlatLoad<em>8</em>7 # one 8-hour shift for all days of the year; 9 a.m.-5 p.m.</li><li>FlatLoad<em>8</em>5 # one 8-hour shift for the weekdays; 9 a.m.-5 p.m.</li></ul><p>Each <code>city</code> and <code>doe_reference_name</code> combination has a default <code>annual_kwh</code>, or you can provide your own <code>annual_kwh</code> or <code>monthly_totals_kwh</code> and the reference profile will be scaled appropriately.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/electric_load.jl#L30-L97">source</a></section></article><h2 id="ElectricTariff"><a class="docs-heading-anchor" href="#ElectricTariff">ElectricTariff</a><a id="ElectricTariff-1"></a><a class="docs-heading-anchor-permalink" href="#ElectricTariff" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.ElectricTariff-Tuple{}" href="#REopt.ElectricTariff-Tuple{}"><code>REopt.ElectricTariff</code></a> — <span class="docstring-category">Method</span></header><section><div><p><code>ElectricTariff</code> is a required REopt input for on-grid scenarios only (it cannot be supplied when <code>Settings.off_grid_flag</code> is true) with the following keys and default values:</p><pre><code class="language-julia">    urdb_label::String=&quot;&quot;,
    urdb_response::Dict=Dict(),
    urdb_utility_name::String=&quot;&quot;,
    urdb_rate_name::String=&quot;&quot;,
    year::Int=2020,
    NEM::Bool=false,
    wholesale_rate::T1=nothing,
    export_rate_beyond_net_metering_limit::T2=nothing,
    monthly_energy_rates::Array=[],
    monthly_demand_rates::Array=[],
    blended_annual_energy_rate::S=nothing,
    blended_annual_demand_rate::R=nothing,
    add_monthly_rates_to_urdb_rate::Bool=false,
    tou_energy_rates_per_kwh::Array=[],
    add_tou_energy_rates_to_urdb_rate::Bool=false,
    remove_tiers::Bool=false,
    demand_lookback_months::AbstractArray{Int64, 1}=Int64[],
    demand_lookback_percent::Real=0.0,
    demand_lookback_range::Int=0,
    coincident_peak_load_active_time_steps::Vector{Vector{Int64}}=[Int64[]],
    coincident_peak_load_charge_per_kw::AbstractVector{&lt;:Real}=Real[]
    ) where {
        T1 &lt;: Union{Nothing, Real, Array{&lt;:Real}}, 
        T2 &lt;: Union{Nothing, Real, Array{&lt;:Real}}, 
        S &lt;: Union{Nothing, Real}, 
        R &lt;: Union{Nothing, Real}
    }</code></pre><div class="admonition is-info"><header class="admonition-header">NEM input</header><div class="admonition-body"><p>The <code>NEM</code> boolean is determined by the <code>ElectricUtility.net_metering_limit_kw</code>. There is no need to pass in a <code>NEM</code> value.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/electric_tariff.jl#L69-L105">source</a></section></article><h2 id="Financial"><a class="docs-heading-anchor" href="#Financial">Financial</a><a id="Financial-1"></a><a class="docs-heading-anchor-permalink" href="#Financial" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.Financial" href="#REopt.Financial"><code>REopt.Financial</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>Financial</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    om_cost_escalation_rate_fraction::Real = 0.025,
    elec_cost_escalation_rate_fraction::Real = 0.019,
    existing_boiler_fuel_cost_escalation_rate_fraction::Float64 = 0.034, 
    boiler_fuel_cost_escalation_rate_fraction::Real = 0.034,
    chp_fuel_cost_escalation_rate_fraction::Real = 0.034,
    generator_fuel_cost_escalation_rate_fraction::Real = 0.027,
    offtaker_tax_rate_fraction::Real = 0.26,
    offtaker_discount_rate_fraction::Real = 0.0564,
    third_party_ownership::Bool = false,
    owner_tax_rate_fraction::Real = 0.26,
    owner_discount_rate_fraction::Real = 0.0564,
    analysis_years::Int = 25,
    value_of_lost_load_per_kwh::Union{Array{R,1}, R} where R&lt;:Real = 1.00,
    microgrid_upgrade_cost_fraction::Real = off_grid_flag ? 0.0 : 0.3, # not applicable when off_grid_flag is true
    macrs_five_year::Array{Float64,1} = [0.2, 0.32, 0.192, 0.1152, 0.1152, 0.0576],  # IRS pub 946
    macrs_seven_year::Array{Float64,1} = [0.1429, 0.2449, 0.1749, 0.1249, 0.0893, 0.0892, 0.0893, 0.0446],
    offgrid_other_capital_costs::Real = 0.0, # only applicable when off_grid_flag is true. Straight-line depreciation is applied to this capex cost, reducing taxable income.
    offgrid_other_annual_costs::Real = 0.0 # only applicable when off_grid_flag is true. Considered tax deductible for owner. Costs are per year. 
    # Emissions cost inputs
    CO2_cost_per_tonne::Real = 51.0,
    CO2_cost_escalation_rate_fraction::Real = 0.042173,
    NOx_grid_cost_per_tonne::Union{Nothing,Real} = nothing,
    SO2_grid_cost_per_tonne::Union{Nothing,Real} = nothing,
    PM25_grid_cost_per_tonne::Union{Nothing,Real} = nothing,
    NOx_onsite_fuelburn_cost_per_tonne::Union{Nothing,Real} = nothing,
    SO2_onsite_fuelburn_cost_per_tonne::Union{Nothing,Real} = nothing,
    PM25_onsite_fuelburn_cost_per_tonne::Union{Nothing,Real} = nothing,
    NOx_cost_escalation_rate_fraction::Union{Nothing,Real} = nothing,
    SO2_cost_escalation_rate_fraction::Union{Nothing,Real} = nothing,
    PM25_cost_escalation_rate_fraction::Union{Nothing,Real} = nothing,
    # fields from other models needed for validation
    latitude::Real, # Passed from Site
    longitude::Real, # Passed from Site
    include_health_in_objective::Bool = false # Passed from Settings</code></pre><div class="admonition is-info"><header class="admonition-header">Third party financing</header><div class="admonition-body"><p>When <code>third_party_ownership</code> is <code>false</code> the offtaker&#39;s discount and tax percentages are used throughout the model:</p><pre><code class="language-julia">    if !third_party_ownership
        owner_tax_rate_fraction = offtaker_tax_rate_fraction
        owner_discount_rate_fraction = offtaker_discount_rate_fraction
    end</code></pre></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/financial.jl#L30-L77">source</a></section></article><h2 id="ElectricUtility"><a class="docs-heading-anchor" href="#ElectricUtility">ElectricUtility</a><a id="ElectricUtility-1"></a><a class="docs-heading-anchor-permalink" href="#ElectricUtility" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.ElectricUtility" href="#REopt.ElectricUtility"><code>REopt.ElectricUtility</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ElectricUtility</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    net_metering_limit_kw::Real = 0,
    interconnection_limit_kw::Real = 1.0e9,
    outage_start_time_step::Int=0,  # for modeling a single outage, with critical load spliced into the baseline load ...
    outage_end_time_step::Int=0,  # ... utiltity production_factor = 0 during the outage
    allow_simultaneous_export_import::Bool = true,  # if true the site has two meters (in effect)
    # next 5 variables below used for minimax the expected outage cost,
    # with max taken over outage start time, expectation taken over outage duration
    outage_start_time_steps::Array{Int,1}=Int[],  # we minimize the maximum outage cost over outage start times
    outage_durations::Array{Int,1}=Int[],  # one-to-one with outage_probabilities, outage_durations can be a random variable
    outage_probabilities::Array{R,1} where R&lt;:Real = [1.0],
    outage_time_steps::Union{Nothing, UnitRange} = isempty(outage_durations) ? nothing : 1:maximum(outage_durations),
    scenarios::Union{Nothing, UnitRange} = isempty(outage_durations) ? nothing : 1:length(outage_durations),
    # Emissions and renewable energy inputs:
    emissions_region::String = &quot;&quot;, # AVERT emissions region. Default is based on location, or can be overriden by providing region here.
    emissions_factor_series_lb_CO2_per_kwh::Union{Real,Array{&lt;:Real,1}} = Float64[], # can be scalar or timeseries (aligned with time_steps_per_hour)
    emissions_factor_series_lb_NOx_per_kwh::Union{Real,Array{&lt;:Real,1}} = Float64[], # can be scalar or timeseries (aligned with time_steps_per_hour)
    emissions_factor_series_lb_SO2_per_kwh::Union{Real,Array{&lt;:Real,1}} = Float64[], # can be scalar or timeseries (aligned with time_steps_per_hour)
    emissions_factor_series_lb_PM25_per_kwh::Union{Real,Array{&lt;:Real,1}} = Float64[], # can be scalar or timeseries (aligned with time_steps_per_hour)
    emissions_factor_CO2_decrease_fraction::Real = 0.01174,
    emissions_factor_NOx_decrease_fraction::Real = 0.01174,
    emissions_factor_SO2_decrease_fraction::Real = 0.01174,
    emissions_factor_PM25_decrease_fraction::Real = 0.01174,
    # fields from other models needed for validation
    CO2_emissions_reduction_min_fraction::Union{Real, Nothing} = nothing, # passed from Site
    CO2_emissions_reduction_max_fraction::Union{Real, Nothing} = nothing, # passed from Site
    include_climate_in_objective::Bool = false, # passed from Settings
    include_health_in_objective::Bool = false # passed from Settings</code></pre><div class="admonition is-info"><header class="admonition-header">Outage modeling</header><div class="admonition-body"><p>Outage indexing begins at 1 (not 0) and the outage is inclusive of the outage end time step.  For instance, to model a 3-hour outage from 12AM to 3AM on Jan 1, outage<em>start</em>time<em>step = 1 and outage</em>end<em>time</em>step = 3. To model a 1-hour outage from 6AM to 7AM on Jan 1, outage<em>start</em>time<em>step = 7 and outage</em>end<em>time</em>step = 7.</p><p>Cannot supply singular outage<em>start(or end)</em>time<em>step and multiple outage</em>start<em>time</em>steps. Must use one or the other.</p></div></div><div class="admonition is-info"><header class="admonition-header">Outages, Emissions, and Renewable Energy Calculations</header><div class="admonition-body"><p>If a single deterministic outage is modeled using outage<em>start</em>time<em>step and outage</em>end<em>time</em>step, emissions and renewable energy percentage calculations and constraints will factor in this outage. If stochastic outages are modeled using outage<em>start</em>time<em>steps, outage</em>durations, and outage_probabilities, emissions and renewable energy percentage calculations and constraints will not consider outages.</p></div></div><div class="admonition is-info"><header class="admonition-header">MPC vs. Non-MPC</header><div class="admonition-body"><p>This constructor is intended to be used with latitude/longitude arguments provided for the non-MPC case and without latitude/longitude arguments provided for the MPC case.</p></div></div><div class="admonition is-info"><header class="admonition-header">Emissions Region</header><div class="admonition-body"><p>The default <code>emissions_region</code> input is determined by the site&#39;s latitude and longitude.  Alternatively, you may input the desired AVERT <code>emissions_region</code>, which must be one of:  [&quot;California&quot;, &quot;Central&quot;, &quot;Florida&quot;, &quot;Mid-Atlantic&quot;, &quot;Midwest&quot;, &quot;Carolinas&quot;, &quot;New England&quot;,  &quot;Northwest&quot;, &quot;New York&quot;, &quot;Rocky Mountains&quot;, &quot;Southeast&quot;, &quot;Southwest&quot;, &quot;Tennessee&quot;, &quot;Texas&quot;,  &quot;Alaska&quot;, &quot;Hawaii (except Oahu)&quot;, &quot;Hawaii (Oahu)&quot;]</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/electric_utility.jl#L30-L87">source</a></section></article><h2 id="PV"><a class="docs-heading-anchor" href="#PV">PV</a><a id="PV-1"></a><a class="docs-heading-anchor-permalink" href="#PV" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.PV" href="#REopt.PV"><code>REopt.PV</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>PV</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    array_type::Int=1, # PV Watts array type (0: Ground Mount Fixed (Open Rack); 1: Rooftop, Fixed; 2: Ground Mount 1-Axis Tracking; 3 : 1-Axis Backtracking; 4: Ground Mount, 2-Axis Tracking)
    tilt::Real= array_type == 1 ? 10 : abs(latitude), # tilt = 10 deg for rooftop systems, abs(lat) for ground-mount
    module_type::Int=0, # PV module type (0: Standard; 1: Premium; 2: Thin Film)
    losses::Real=0.14,
    azimuth::Real = latitude≥0 ? 180 : 0, # set azimuth to zero for southern hemisphere
    gcr::Real=0.4,
    radius::Int=0,
    name::String=&quot;PV&quot;,
    location::String=&quot;both&quot;,
    existing_kw::Real=0,
    min_kw::Real=0,
    max_kw::Real=1.0e9,
    installed_cost_per_kw::Real=1592.0,
    om_cost_per_kw::Real=17.0,
    degradation_fraction::Real=0.005,
    macrs_option_years::Int = 5,
    macrs_bonus_fraction::Real = 1.0,
    macrs_itc_reduction::Real = 0.5,
    kw_per_square_foot::Real=0.01,
    acres_per_kw::Real=6e-3,
    inv_eff::Real=0.96,
    dc_ac_ratio::Real=1.2,
    production_factor_series::Union{Nothing, Array{&lt;:Real,1}} = nothing,
    federal_itc_fraction::Real = 0.26,
    federal_rebate_per_kw::Real = 0.0,
    state_ibi_fraction::Real = 0.0,
    state_ibi_max::Real = 1.0e10,
    state_rebate_per_kw::Real = 0.0,
    state_rebate_max::Real = 1.0e10,
    utility_ibi_fraction::Real = 0.0,
    utility_ibi_max::Real = 1.0e10,
    utility_rebate_per_kw::Real = 0.0,
    utility_rebate_max::Real = 1.0e10,
    production_incentive_per_kwh::Real = 0.0,
    production_incentive_max_benefit::Real = 1.0e9,
    production_incentive_years::Int = 1,
    production_incentive_max_kw::Real = 1.0e9,
    can_net_meter::Bool = off_grid_flag ? false : true,
    can_wholesale::Bool = off_grid_flag ? false : true,
    can_export_beyond_nem_limit::Bool = off_grid_flag ? false : true,
    can_curtail::Bool = true,
    operating_reserve_required_fraction::Real = off_grid_flag ? 0.25 : 0.0, # if off grid, 25%, else 0%. Applied to each time_step as a % of PV generation.</code></pre><div class="admonition is-info"><header class="admonition-header">Multiple PV types</header><div class="admonition-body"><p>Multiple PV types can be considered by providing an array of PV inputs. See example in <code>src/test/scenarios/multiple_pvs.json</code></p></div></div><div class="admonition is-info"><header class="admonition-header">PV tilt and aziumth</header><div class="admonition-body"><p>If <code>tilt</code> is not provided, then it is set to the absolute value of <code>Site.latitude</code> for ground-mount systems and is set to 10 degrees for rooftop systems. If <code>azimuth</code> is not provided, then it is set to 180 if the site is in the northern hemisphere and 0 if in the southern hemisphere.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/pv.jl#L30-L84">source</a></section></article><h2 id="Wind"><a class="docs-heading-anchor" href="#Wind">Wind</a><a id="Wind-1"></a><a class="docs-heading-anchor-permalink" href="#Wind" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.Wind" href="#REopt.Wind"><code>REopt.Wind</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>Wind</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    min_kw = 0.0,
    max_kw = 1.0e9,
    installed_cost_per_kw = nothing,
    om_cost_per_kw = 35.0,
    production_factor_series = nothing,
    size_class = &quot;&quot;,
    wind_meters_per_sec = [],
    wind_direction_degrees = [],
    temperature_celsius = [],
    pressure_atmospheres = [],
    macrs_option_years = 5,
    macrs_bonus_fraction = 0.0,
    macrs_itc_reduction = 0.5,
    federal_itc_fraction = nothing,
    federal_rebate_per_kw = 0.0,
    state_ibi_fraction = 0.0,
    state_ibi_max = 1.0e10,
    state_rebate_per_kw = 0.0,
    state_rebate_max = 1.0e10,
    utility_ibi_fraction = 0.0,
    utility_ibi_max = 1.0e10,
    utility_rebate_per_kw = 0.0,
    utility_rebate_max = 1.0e10,
    production_incentive_per_kwh = 0.0,
    production_incentive_max_benefit = 1.0e9,
    production_incentive_years = 1,
    production_incentive_max_kw = 1.0e9,
    can_net_meter = true,
    can_wholesale = true,
    can_export_beyond_nem_limit = true
    operating_reserve_required_fraction::Real = off_grid_flag ? 0.50 : 0.0, # Only applicable when off_grid_flag is True. Applied to each time_step as a % of wind generation serving load.</code></pre><p><code>size_class</code> must be one of [&quot;residential&quot;, &quot;commercial&quot;, &quot;medium&quot;, &quot;large&quot;]. If <code>size_class</code> is not provided then it is determined based on the average electric load.</p><p>If no <code>installed_cost_per_kw</code> is provided then it is determined from:</p><pre><code class="language-julia">size_class_to_installed_cost = Dict(
    &quot;residential&quot;=&gt; 11950.0,
    &quot;commercial&quot;=&gt; 7390.0,
    &quot;medium&quot;=&gt; 4440.0,
    &quot;large&quot;=&gt; 3450.0
)</code></pre><p>The Federal Investment Tax Credit is adjusted based on the <code>size_class</code> as follows (if the default of 0.3 is not changed):</p><pre><code class="language-julia">size_class_to_itc_incentives = Dict(
    &quot;residential&quot;=&gt; 0.3,
    &quot;commercial&quot;=&gt; 0.3,
    &quot;medium&quot;=&gt; 0.12,
    &quot;large&quot;=&gt; 0.12
)</code></pre><p>If the <code>production_factor_series</code> is not provided then NREL&#39;s System Advisor Model (SAM) is used to get the wind turbine  production factor.</p><p>Wind resource values are optional, i.e. (<code>wind_meters_per_sec</code>, <code>wind_direction_degrees</code>, <code>temperature_celsius</code>, and <code>pressure_atmospheres</code>). If not provided then the resource values are downloaded from NREL&#39;s Wind Toolkit. These values are passed to SAM to get the turbine production factor.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/wind.jl#L30-L97">source</a></section></article><h2 id="ElectricStorage"><a class="docs-heading-anchor" href="#ElectricStorage">ElectricStorage</a><a id="ElectricStorage-1"></a><a class="docs-heading-anchor-permalink" href="#ElectricStorage" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.ElectricStorageDefaults" href="#REopt.ElectricStorageDefaults"><code>REopt.ElectricStorageDefaults</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ElectricStorage</code> is an optional optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    off_grid_flag::Bool = false  
    min_kw::Real = 0.0
    max_kw::Real = 1.0e4
    min_kwh::Real = 0.0
    max_kwh::Real = 1.0e6
    internal_efficiency_fraction::Float64 = 0.975
    inverter_efficiency_fraction::Float64 = 0.96
    rectifier_efficiency_fraction::Float64 = 0.96
    soc_min_fraction::Float64 = 0.2
    soc_init_fraction::Float64 = off_grid_flag ? 1.0 : 0.5
    can_grid_charge::Bool = off_grid_flag ? false : true
    installed_cost_per_kw::Real = 775.0
    installed_cost_per_kwh::Real = 388.0
    replace_cost_per_kw::Real = 440.0
    replace_cost_per_kwh::Real = 220.0
    inverter_replacement_year::Int = 10
    battery_replacement_year::Int = 10
    macrs_option_years::Int = 7
    macrs_bonus_fraction::Float64 = 1.0
    macrs_itc_reduction::Float64 = 0.5
    total_itc_fraction::Float64 = 0.0
    total_rebate_per_kw::Real = 0.0
    total_rebate_per_kwh::Real = 0.0
    charge_efficiency::Float64 = rectifier_efficiency_fraction * internal_efficiency_fraction^0.5
    discharge_efficiency::Float64 = inverter_efficiency_fraction * internal_efficiency_fraction^0.5
    grid_charge_efficiency::Float64 = can_grid_charge ? charge_efficiency : 0.0
    model_degradation::Bool = false
    degradation::Dict = Dict()
    minimum_avg_soc_fraction::Float64 = 0.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/energy_storage/electric_storage.jl#L163-L197">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="REopt.Degradation" href="#REopt.Degradation"><code>REopt.Degradation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Degradation</code></pre><p>Inputs used when <code>ElectricStorage.model_degradation</code> is <code>true</code>:</p><pre><code class="language-julia">Base.@kwdef mutable struct Degradation
    calendar_fade_coefficient::Real = 2.46E-03
    cycle_fade_coefficient::Real = 7.82E-05
    time_exponent::Real = 0.5
    installed_cost_per_kwh_declination_rate::Float64 = 0.05
    maintenance_strategy::String = &quot;augmentation&quot;  # one of [&quot;augmentation&quot;, &quot;replacement&quot;]
    maintenance_cost_per_kwh::Vector{&lt;:Real} = Real[]
end</code></pre><p>None of the above values are required. If <code>ElectricStorage.model_degradation</code> is <code>true</code> then the  defaults above are used. If the <code>maintenance_cost_per_kwh</code> is not provided then it is determined using the <code>ElectricStorage.installed_cost_per_kwh</code> and the <code>installed_cost_per_kwh_declination_rate</code> along with a present worth factor <span>$f$</span> to account for the present cost of buying a battery in the future. The present worth factor for each day is:</p><p><span>$f(day) = \frac{ (1-r_g)^\frac{day}{365} } { (1+r_d)^\frac{day}{365} }$</span></p><p>where <span>$r_g$</span> = <code>installed_cost_per_kwh_declination_rate</code> and <span>$r_d$</span> = <code>p.s.financial.owner_discount_rate_fraction</code>.</p><p>Note this day-specific calculation of the present-worth factor accumulates differently from the annually updated discount rate for other net-present value calculations in REopt, and has a higher effective discount rate as a result.  The present  worth factor is used in two different ways, depending on the <code>maintenance_strategy</code>, which is described below.</p><div class="admonition is-category-warn"><header class="admonition-header">Warn</header><div class="admonition-body"><p>When modeling degradation the following ElectricStorage inputs are not used:</p><ul><li><code>replace_cost_per_kw</code></li><li><code>replace_cost_per_kwh</code></li><li><code>inverter_replacement_year</code></li><li><code>battery_replacement_year</code></li></ul><p>The are replaced by the <code>maintenance_cost_per_kwh</code> vector.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>When providing the <code>maintenance_cost_per_kwh</code> it must have a length equal to <code>Financial.analysis_years*365</code>.</p></div></div><p><strong>Battery State Of Health</strong></p><p>The state of health [<code>SOH</code>] is a linear function of the daily average state of charge [<code>Eavg</code>] and the daily equivalent full cycles [<code>EFC</code>]. The initial <code>SOH</code> is set to the optimal battery energy capacity  (in kWh). The evolution of the <code>SOH</code> beyond the first day is:</p><p><span>$SOH[d] = SOH[d-1] - h\left(     \frac{1}{2} k_{cal} Eavg[d-1] / \sqrt{d} + k_{cyc} EFC[d-1] \quad \forall d \in \{2\dots D\} \right)$</span></p><p>where:</p><ul><li><span>$k_{cal}$</span> is the <code>calendar_fade_coefficient</code></li><li><span>$k_{cyc}$</span> is the <code>cycle_fade_coefficient</code></li><li><span>$h$</span> is the hours per time step</li><li><span>$D$</span> is the total number of days, 365 * <code>analysis_years</code></li></ul><p>The <code>SOH</code> is used to determine the maintence cost of the storage system, which depends on the <code>maintenance_strategy</code>.</p><p><strong>Augmentation Maintenance Strategy</strong></p><p>The augmentation maintenance strategy assumes that the battery energy capacity is maintained by replacing degraded cells daily in terms of cost. Using the definition of the <code>SOH</code> above the maintenance cost is:</p><p><span>$C_{\text{aug}} = \sum_{d \in \{2\dots D\}} 0.8 C_{\text{install}} f(day) \left( SOH[d-1] - SOH[d] \right)$</span></p><p>where</p><ul><li>the <span>$0.8$</span> factor accounts for sunk costs that do not need to be paid;</li><li><span>$C_{\text{install}}$</span> is the <code>ElectricStorage.installed_cost_per_kwh</code>; and</li><li><span>$SOH[d-1] - SOH[d]$</span> is the incremental amount of battery capacity lost in a day.</li></ul><p>The <span>$C_{\text{aug}}$</span> is added to the objective function to be minimized with all other costs.</p><p><strong>Replacement Maintenance Strategy</strong></p><p>Modeling the replacement maintenance strategy is more complex than the augmentation strategy. Effectively the replacement strategy says that the battery has to be replaced once the <code>SOH</code> hits 80% of the optimal, purchased capacity. It is possible that multiple replacements could be required under this strategy.</p><div class="admonition is-category-warn"><header class="admonition-header">Warn</header><div class="admonition-body"><p>The &quot;replacement&quot; maintenance strategy requires integer variables and indicator constraints. Not all solvers support indicator constraints and some solvers are slow with integer variables.</p></div></div><p>The replacement strategy cost is:</p><p><span>$C_{\text{repl}} = B_{\text{kWh}} N_{\text{repl}} f(d_{80}) C_{\text{install}}$</span></p><p>where:</p><ul><li><span>$B_{\text{kWh}}$</span> is the optimal battery capacity (<code>ElectricStorage.size_kwh</code> in the results dictionary);</li><li><span>$N_{\text{repl}}$</span> is the number of battery replacments required (a function of the month in which the <code>SOH</code> reaches 80% of original capacity);</li><li><span>$f(d_{80})$</span> is the present worth factor at approximately the 15th day of the month that the <code>SOH</code> reaches 80% of original capacity.</li></ul><p>The <span>$C_{\text{repl}}$</span> is added to the objective function to be minimized with all other costs.</p><p><strong>Example of inputs</strong></p><p>The following shows how one would use the degradation model in REopt via the <a href="#Scenario">Scenario</a> inputs:</p><pre><code class="language-javascript">{
    ...
    &quot;ElectricStorage&quot;: {
        &quot;installed_cost_per_kwh&quot;: 390,
        ...
        &quot;model_degradation&quot;: true,
        &quot;degradation&quot;: {
            &quot;calendar_fade_coefficient&quot;: 2.86E-03,
            &quot;cycle_fade_coefficient&quot;: 6.22E-05,
            &quot;installed_cost_per_kwh_declination_rate&quot;: 0.06,
            &quot;maintenance_strategy&quot;: &quot;replacement&quot;,
            ...
        }
    },
    ...
}</code></pre><p>Note that not all of the above inputs are necessary. When not providing <code>calendar_fade_coefficient</code> for example the default value will be used.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/energy_storage/electric_storage.jl#L30-L152">source</a></section></article><h2 id="Generator"><a class="docs-heading-anchor" href="#Generator">Generator</a><a id="Generator-1"></a><a class="docs-heading-anchor-permalink" href="#Generator" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.Generator" href="#REopt.Generator"><code>REopt.Generator</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>Generator</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    existing_kw::Real = 0,
    min_kw::Real = 0,
    max_kw::Real = 1.0e6,
    installed_cost_per_kw::Real = 500.0,
    om_cost_per_kw::Real = off_grid_flag ? 20.0 : 10.0,
    om_cost_per_kwh::Real = 0.0,
    fuel_cost_per_gallon::Real = 3.0,
    fuel_slope_gal_per_kwh::Real = 0.076,
    fuel_intercept_gal_per_hr::Real = 0.0,
    fuel_avail_gal::Real = off_grid_flag ? 1.0e9 : 660.0,
    min_turn_down_fraction::Real = off_grid_flag ? 0.15 : 0.0,
    only_runs_during_grid_outage::Bool = true,
    sells_energy_back_to_grid::Bool = false,
    can_net_meter::Bool = false,
    can_wholesale::Bool = false,
    can_export_beyond_nem_limit = false,
    can_curtail::Bool = false,
    macrs_option_years::Int = 0,
    macrs_bonus_fraction::Real = 1.0,
    macrs_itc_reduction::Real = 0.0,
    federal_itc_fraction::Real = 0.0,
    federal_rebate_per_kw::Real = 0.0,
    state_ibi_fraction::Real = 0.0,
    state_ibi_max::Real = 1.0e10,
    state_rebate_per_kw::Real = 0.0,
    state_rebate_max::Real = 1.0e10,
    utility_ibi_fraction::Real = 0.0,
    utility_ibi_max::Real = 1.0e10,
    utility_rebate_per_kw::Real = 0.0,
    utility_rebate_max::Real = 1.0e10,
    production_incentive_per_kwh::Real = 0.0,
    production_incentive_max_benefit::Real = 1.0e9,
    production_incentive_years::Int = 0,
    production_incentive_max_kw::Real = 1.0e9,
    fuel_renewable_energy_fraction::Real = 0.0,
    emissions_factor_lb_CO2_per_gal::Real = 22.51,
    emissions_factor_lb_NOx_per_gal::Real = 0.0775544,
    emissions_factor_lb_SO2_per_gal::Real = 0.040020476,
    emissions_factor_lb_PM25_per_gal::Real = 0.0,
    replacement_year::Int = off_grid_flag ? 10 : analysis_years, 
    replace_cost_per_kw::Real = off_grid_flag ? installed_cost_per_kw : 0.0</code></pre><div class="admonition is-info"><header class="admonition-header">Replacement costs</header><div class="admonition-body"><p>Generator replacement costs will not be considered if <code>Generator.replacement_year</code> &gt;= <code>Financial.analysis_years</code>.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/generator.jl#L30-L79">source</a></section></article><h2 id="ExistingBoiler"><a class="docs-heading-anchor" href="#ExistingBoiler">ExistingBoiler</a><a id="ExistingBoiler-1"></a><a class="docs-heading-anchor-permalink" href="#ExistingBoiler" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.ExistingBoiler" href="#REopt.ExistingBoiler"><code>REopt.ExistingBoiler</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ExistingBoiler</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    max_heat_demand_kw::Real=0,
    production_type::String = &quot;hot_water&quot;,
    max_thermal_factor_on_peak_load::Real = 1.25,
    efficiency::Real = NaN,
    fuel_cost_per_mmbtu::Union{&lt;:Real, AbstractVector{&lt;:Real}} = [],
    fuel_type::String = &quot;natural_gas&quot;, # &quot;restrict_to&quot;: [&quot;natural_gas&quot;, &quot;landfill_bio_gas&quot;, &quot;propane&quot;, &quot;diesel_oil&quot;]
    can_supply_steam_turbine::Bool = false,
    fuel_renewable_energy_fraction::Real = get(FUEL_DEFAULTS[&quot;fuel_renewable_energy_fraction&quot;],fuel_type,0),
    emissions_factor_lb_CO2_per_mmbtu::Real = get(FUEL_DEFAULTS[&quot;emissions_factor_lb_CO2_per_mmbtu&quot;],fuel_type,0),
    emissions_factor_lb_NOx_per_mmbtu::Real = get(FUEL_DEFAULTS[&quot;emissions_factor_lb_NOx_per_mmbtu&quot;],fuel_type,0),
    emissions_factor_lb_SO2_per_mmbtu::Real = get(FUEL_DEFAULTS[&quot;emissions_factor_lb_SO2_per_mmbtu&quot;],fuel_type,0),
    emissions_factor_lb_PM25_per_mmbtu::Real = get(FUEL_DEFAULTS[&quot;emissions_factor_lb_PM25_per_mmbtu&quot;],fuel_type,0)</code></pre><div class="admonition is-info"><header class="admonition-header">Max ExistingBoiler size</header><div class="admonition-body"><p>The maximum size [kW] of the <code>ExistingBoiler</code> will be set based on the peak heat demand as follows:</p><pre><code class="language-julia">max_kw = max_heat_demand_kw * max_thermal_factor_on_peak_load</code></pre></div></div><div class="admonition is-info"><header class="admonition-header">ExistingBoiler operating costs</header><div class="admonition-body"><p>The <code>ExistingBoiler</code>&#39;s <code>fuel_cost_per_mmbtu</code> field is a required input. The <code>fuel_cost_per_mmbtu</code> can be a scalar, a list of 12 monthly values, or a time series of values for every time step.</p></div></div><div class="admonition is-info"><header class="admonition-header">Determining `efficiency`</header><div class="admonition-body"><p>Must supply either: <code>efficiency</code> or <code>production_type</code>.</p><p>If <code>efficiency</code> is not supplied, the <code>efficiency</code> will be determined based on the <code>production_type</code>.  If <code>production_type</code> is not supplied, it defaults to <code>hot_water</code>. The following defaults are used:</p><pre><code class="language-julia">existing_boiler_efficiency_defaults = Dict(
    &quot;hot_water&quot; =&gt; 0.8,
    &quot;steam&quot; =&gt; 0.75
)</code></pre></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/existing_boiler.jl#L50-L89">source</a></section></article><h2 id="CHP"><a class="docs-heading-anchor" href="#CHP">CHP</a><a id="CHP-1"></a><a class="docs-heading-anchor-permalink" href="#CHP" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.CHP" href="#REopt.CHP"><code>REopt.CHP</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>CHP</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    prime_mover::Union{String, Nothing} = nothing Suggested to inform applicable default cost and performance
    fuel_cost_per_mmbtu::Union{&lt;:Real, AbstractVector{&lt;:Real}} = []  REQUIRED

    # Required &quot;custom inputs&quot; if not providing prime_mover:
    installed_cost_per_kw::Union{Float64, AbstractVector{Float64}} = NaN
    tech_sizes_for_cost_curve::Union{Float64, AbstractVector{Float64}} = NaN
    om_cost_per_kwh::Float64 = NaN
    electric_efficiency_full_load::Float64 = NaN
    electric_efficiency_half_load::Float64 = NaN
    min_turn_down_fraction::Float64 = NaN
    thermal_efficiency_full_load::Float64 = NaN
    thermal_efficiency_half_load::Float64 = NaN
    min_allowable_kw::Float64 = NaN
    max_kw::Float64 = NaN
    cooling_thermal_factor::Float64 = NaN  # only needed with cooling load
    unavailability_periods::AbstractVector{Dict} = Dict[]

    # Optional inputs:
    size_class::Union{Int, Nothing} = nothing
    min_kw::Float64 = 0.0
    fuel_type::String = &quot;natural_gas&quot; # &quot;restrict_to&quot;: [&quot;natural_gas&quot;, &quot;landfill_bio_gas&quot;, &quot;propane&quot;, &quot;diesel_oil&quot;]
    om_cost_per_kw::Float64 = 0.0
    om_cost_per_hr_per_kw_rated::Float64 = 0.0
    supplementary_firing_capital_cost_per_kw::Float64 = 150.0
    supplementary_firing_max_steam_ratio::Float64 = 1.0
    supplementary_firing_efficiency::Float64 = 0.92
    standby_rate_per_kw_per_month::Float64 = 0.0
    reduces_demand_charges::Bool = true
    can_supply_steam_turbine::Bool=false

    macrs_option_years::Int = 5
    macrs_bonus_fraction::Float64 = 1.0
    macrs_itc_reduction::Float64 = 0.5
    federal_itc_fraction::Float64 = 0.1
    federal_rebate_per_kw::Float64 = 0.0
    state_ibi_fraction::Float64 = 0.0
    state_ibi_max::Float64 = 1.0e10
    state_rebate_per_kw::Float64 = 0.0
    state_rebate_max::Float64 = 1.0e10
    utility_ibi_fraction::Float64 = 0.0
    utility_ibi_max::Float64 = 1.0e10
    utility_rebate_per_kw::Float64 = 0.0
    utility_rebate_max::Float64 = 1.0e10
    production_incentive_per_kwh::Float64 = 0.0
    production_incentive_max_benefit::Float64 = 1.0e9
    production_incentive_years::Int = 0
    production_incentive_max_kw::Float64 = 1.0e9
    can_net_meter::Bool = false
    can_wholesale::Bool = false
    can_export_beyond_nem_limit::Bool = false
    can_curtail::Bool = false
    fuel_renewable_energy_fraction::Float64 = FUEL_DEFAULTS[&quot;fuel_renewable_energy_fraction&quot;][fuel_type]
    emissions_factor_lb_CO2_per_mmbtu::Float64 = FUEL_DEFAULTS[&quot;emissions_factor_lb_CO2_per_mmbtu&quot;][fuel_type]
    emissions_factor_lb_NOx_per_mmbtu::Float64 = FUEL_DEFAULTS[&quot;emissions_factor_lb_NOx_per_mmbtu&quot;][fuel_type]
    emissions_factor_lb_SO2_per_mmbtu::Float64 = FUEL_DEFAULTS[&quot;emissions_factor_lb_SO2_per_mmbtu&quot;][fuel_type]
    emissions_factor_lb_PM25_per_mmbtu::Float64 = FUEL_DEFAULTS[&quot;emissions_factor_lb_PM25_per_mmbtu&quot;][fuel_type]</code></pre><p>!!! note defaults and &quot;Required inputs&quot;     See the <code>get_chp_defaults_prime_mover_size_class()</code> function docstring for details on the logic of choosing the type of CHP that is modeled     If no information is provided, the default <code>prime_mover</code> is <code>recip_engine</code> and the <code>size_class</code> is 1 which represents     the widest range of sizes available.</p><pre><code class="language-none">`fuel_cost_per_mmbtu` is always required</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/chp.jl#L33-L101">source</a></section></article><h2 id="AbsorptionChiller"><a class="docs-heading-anchor" href="#AbsorptionChiller">AbsorptionChiller</a><a id="AbsorptionChiller-1"></a><a class="docs-heading-anchor-permalink" href="#AbsorptionChiller" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.AbsorptionChiller" href="#REopt.AbsorptionChiller"><code>REopt.AbsorptionChiller</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>AbsorptionChiller</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    thermal_consumption_hot_water_or_steam::Union{String, Nothing} = nothing
    chp_prime_mover::String = &quot;&quot;

    #Required if neither &quot;thermal_consumption_hot_water_or_steam&quot; nor &quot;chp_prime_mover&quot; nor an ExistingBoiler included in inputs:
    installed_cost_per_ton::Union{Float64, Nothing} = nothing
    om_cost_per_ton::Union{Float64, Nothing} = nothing


    #Optional
    min_ton::Float64 = 0.0,
    max_ton::Float64 = BIG_NUMBER,
    cop_thermal::Union{Float64, Nothing} = nothing,
    cop_electric::Float64 = 14.1,
    om_cost_per_ton::Union{Float64, Nothing} = nothing,
    macrs_option_years::Float64 = 0,
    macrs_bonus_fraction::Float64 = 0</code></pre><div class="admonition is-info"><header class="admonition-header">Required inputs</header><div class="admonition-body"><p>To model AbsorptionChiller, you must provide at least one of the following: (i) <code>thermal_consumption_hot_water_or_steam</code> from [&quot;steam&quot;, &quot;hot<em>water&quot;], (ii)  (ii), `chp</em>prime<em>mover` from [&quot;recip</em>engine&quot;, &quot;micro<em>turbine&quot;, &quot;combustion</em>turbine&quot;, &quot;fuel<em>cell&quot;],or (iii) all of the &quot;custom inputs&quot; defined below. If prime</em>mover is provided, any missing value from the &quot;custom inputs&quot; will be populated from data/absorption<em>chiller/defaults.json,  based on the `thermal</em>consumption<em>hot</em>water<em>or</em>steam<code>or</code>prime<em>mover`. boiler</em>type is &quot;steam&quot; if <code>prime_mover</code> is &quot;combustion<em>turbine&quot;  and is &quot;hot</em>water&quot; for all other <code>prime_mover</code> types.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/absorption_chiller.jl#L31-L58">source</a></section></article><h2 id="Boiler"><a class="docs-heading-anchor" href="#Boiler">Boiler</a><a id="Boiler-1"></a><a class="docs-heading-anchor-permalink" href="#Boiler" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.Boiler" href="#REopt.Boiler"><code>REopt.Boiler</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">Boiler</code></pre><p>When modeling a heating load an <code>ExistingBoiler</code> model is created even if user does not provide the <code>ExistingBoiler</code> key. The <code>Boiler</code> model is not created by default. If a user provides the <code>Boiler</code> key then the optimal scenario has the option to purchase this new <code>Boiler</code> to meet the heating load in addition to using the <code>ExistingBoiler</code> to meet the heating load. </p><pre><code class="language-julia">function Boiler(;
    min_mmbtu_per_hour::Real = 0.0,
    max_mmbtu_per_hour::Real = 0.0,
    efficiency::Real = 0.8,
    fuel_cost_per_mmbtu::Union{&lt;:Real, AbstractVector{&lt;:Real}} = 0.0,
    macrs_option_years::Int = 0,
    macrs_bonus_fraction::Real = 0.0,
    installed_cost_per_mmbtu_per_hour::Real = 293000.0,
    om_cost_per_mmbtu_per_hour::Real = 2930.0,
    om_cost_per_mmbtu::Real = 0.0,
    fuel_type::String = &quot;natural_gas&quot;,  # &quot;restrict_to&quot;: [&quot;natural_gas&quot;, &quot;landfill_bio_gas&quot;, &quot;propane&quot;, &quot;diesel_oil&quot;, &quot;uranium&quot;]
    can_supply_steam_turbine::Bool = true
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/boiler.jl#L46-L69">source</a></section></article><h2 id="HotThermalStorage"><a class="docs-heading-anchor" href="#HotThermalStorage">HotThermalStorage</a><a id="HotThermalStorage-1"></a><a class="docs-heading-anchor-permalink" href="#HotThermalStorage" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.HotThermalStorageDefaults" href="#REopt.HotThermalStorageDefaults"><code>REopt.HotThermalStorageDefaults</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>HotThermalStorage</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    min_gal::Float64 = 0.0
    max_gal::Float64 = 0.0
    hot_water_temp_degF::Float64 = 180.0
    cool_water_temp_degF::Float64 = 160.0
    internal_efficiency_fraction::Float64 = 0.999999
    soc_min_fraction::Float64 = 0.1
    soc_init_fraction::Float64 = 0.5
    installed_cost_per_gal::Float64 = 1.50
    thermal_decay_rate_fraction::Float64 = 0.0004
    om_cost_per_gal::Float64 = 0.0
    macrs_option_years::Int = 0
    macrs_bonus_fraction::Float64 = 0.0
    macrs_itc_reduction::Float64 = 0.0
    total_itc_fraction::Float64 = 0.0
    total_rebate_per_kwh::Float64 = 0.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/energy_storage/thermal_storage.jl#L74-L94">source</a></section></article><h2 id="ColdThermalStorage"><a class="docs-heading-anchor" href="#ColdThermalStorage">ColdThermalStorage</a><a id="ColdThermalStorage-1"></a><a class="docs-heading-anchor-permalink" href="#ColdThermalStorage" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.ColdThermalStorageDefaults" href="#REopt.ColdThermalStorageDefaults"><code>REopt.ColdThermalStorageDefaults</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Cold thermal energy storage sytem; specifically, a chilled water system used to meet thermal cooling loads.</p><p><code>ColdThermalStorage</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    min_gal::Float64 = 0.0
    max_gal::Float64 = 0.0
    hot_water_temp_degF::Float64 = 56.0
    cool_water_temp_degF::Float64 = 44.0
    internal_efficiency_fraction::Float64 = 0.999999
    soc_min_fraction::Float64 = 0.1
    soc_init_fraction::Float64 = 0.5
    installed_cost_per_gal::Float64 = 1.50
    thermal_decay_rate_fraction::Float64 = 0.0004
    om_cost_per_gal::Float64 = 0.0
    macrs_option_years::Int = 0
    macrs_bonus_fraction::Float64 = 0.0
    macrs_itc_reduction::Float64 = 0.0
    total_itc_fraction::Float64 = 0.0
    total_rebate_per_kwh::Float64 = 0.0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/energy_storage/thermal_storage.jl#L32-L54">source</a></section></article><h2 id="DomesticHotWaterLoad"><a class="docs-heading-anchor" href="#DomesticHotWaterLoad">DomesticHotWaterLoad</a><a id="DomesticHotWaterLoad-1"></a><a class="docs-heading-anchor-permalink" href="#DomesticHotWaterLoad" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.DomesticHotWaterLoad" href="#REopt.DomesticHotWaterLoad"><code>REopt.DomesticHotWaterLoad</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>DomesticHotWaterLoad</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    doe_reference_name::String = &quot;&quot;,
    blended_doe_reference_names::Array{String, 1} = String[],
    blended_doe_reference_percents::Array{&lt;:Real,1} = Real[],
    addressable_load_fraction::Union{&lt;:Real, AbstractVector{&lt;:Real}} = 1.0,  # Fraction of input fuel load which is addressable by heating technologies. Can be a scalar or vector with length aligned with use of monthly_mmbtu or fuel_loads_mmbtu_per_hour.
    annual_mmbtu::Union{Real, Nothing} = nothing,
    monthly_mmbtu::Array{&lt;:Real,1} = Real[],
    fuel_loads_mmbtu_per_hour::Array{&lt;:Real,1} = Real[] # Vector of hot water fuel loads [mmbtu/hour]. Length must equal 8760 * `Settings.time_steps_per_hour`</code></pre><p>There are many ways in which a DomesticHotWaterLoad can be defined:</p><ol><li>When using either <code>doe_reference_name</code> or <code>blended_doe_reference_names</code> in an <code>ElectricLoad</code> one only needs to provide the input key &quot;DomesticHotWaterLoad&quot; in the <code>Scenario</code> (JSON or Dict). In this case the values from DoE reference names from the <code>ElectricLoad</code> will be used to define the <code>DomesticHotWaterLoad</code>.</li><li>One can provide the <code>doe_reference_name</code> or <code>blended_doe_reference_names</code> directly in the <code>DomesticHotWaterLoad</code> key within the <code>Scenario</code>. These values can be combined with the <code>annual_mmbtu</code> or <code>monthly_mmbtu</code> inputs to scale the DoE reference profile(s).</li><li>One can provide the <code>fuel_loads_mmbtu_per_hour</code> value in the <code>DomesticHotWaterLoad</code> key within the <code>Scenario</code>.</li></ol><div class="admonition is-info"><header class="admonition-header">Hot water loads</header><div class="admonition-body"><p>Hot water and space heating thermal &quot;load&quot; inputs are in terms of energy input required (boiler fuel), not the actual energy demand. The fuel energy is multiplied by the boiler_efficiency to get the actual energy demand.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/heating_cooling_loads.jl#L30-L51">source</a></section></article><h2 id="SpaceHeatingLoad"><a class="docs-heading-anchor" href="#SpaceHeatingLoad">SpaceHeatingLoad</a><a id="SpaceHeatingLoad-1"></a><a class="docs-heading-anchor-permalink" href="#SpaceHeatingLoad" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.SpaceHeatingLoad" href="#REopt.SpaceHeatingLoad"><code>REopt.SpaceHeatingLoad</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>SpaceHeatingLoad</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    doe_reference_name::String = &quot;&quot;,
    blended_doe_reference_names::Array{String, 1} = String[],
    blended_doe_reference_percents::Array{&lt;:Real,1} = Real[],
    addressable_load_fraction::Union{&lt;:Real, AbstractVector{&lt;:Real}} = 1.0,  # Fraction of input fuel load which is addressable by heating technologies. Can be a scalar or vector with length aligned with use of monthly_mmbtu or fuel_loads_mmbtu_per_hour.
    annual_mmbtu::Union{Real, Nothing} = nothing,
    monthly_mmbtu::Array{&lt;:Real,1} = Real[],
    fuel_loads_mmbtu_per_hour::Array{&lt;:Real,1} = Real[] # Vector of space heating fuel loads [mmbtu/hr]. Length must equal 8760 * `Settings.time_steps_per_hour`</code></pre><p>There are many ways to define a <code>SpaceHeatingLoad</code>:</p><ol><li>a time-series via the <code>fuel_loads_mmbtu_per_hour</code>,</li><li>scaling a DoE Commercial Reference Building (CRB) profile or a blend of CRB profiles to either the <code>annual_mmbtu</code> or <code>monthly_mmbtu</code> values;</li><li>or using the <code>doe_reference_name</code> or <code>blended_doe_reference_names</code> from the <code>ElectricLoad</code>.</li></ol><p>When using an <code>ElectricLoad</code> defined from a <code>doe_reference_name</code> or <code>blended_doe_reference_names</code>  one only needs to provide an empty Dict in the scenario JSON to add a <code>SpaceHeatingLoad</code> to a  <code>Scenario</code>, i.e.:</p><pre><code class="language-json">...
&quot;ElectricLoad&quot;: {&quot;doe_reference_name&quot;: &quot;MidriseApartment&quot;},
&quot;SpaceHeatingLoad&quot; : {},
...</code></pre><p>In this case the values provided for <code>doe_reference_name</code>, or  <code>blended_doe_reference_names</code> and  <code>blended_doe_reference_percents</code> are copied from the <code>ElectricLoad</code> to the <code>SpaceHeatingLoad</code>.</p><div class="admonition is-info"><header class="admonition-header">Space heating loads</header><div class="admonition-body"><p>Hot water and space heating thermal &quot;load&quot; inputs are in terms of energy input required (boiler fuel), not the actual energy demand. The fuel energy is multiplied by the boiler_efficiency to get the actual energy demand.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/heating_cooling_loads.jl#L122-L154">source</a></section></article><h2 id="FlexibleHVAC"><a class="docs-heading-anchor" href="#FlexibleHVAC">FlexibleHVAC</a><a id="FlexibleHVAC-1"></a><a class="docs-heading-anchor-permalink" href="#FlexibleHVAC" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.FlexibleHVAC" href="#REopt.FlexibleHVAC"><code>REopt.FlexibleHVAC</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>FlexibleHVAC</code> is an optional REopt input with the following keys and default values: </p><pre><code class="language-julia">    system_matrix::AbstractMatrix{Float64}  # N x N, with N states (temperatures in RC network)
    input_matrix::AbstractMatrix{Float64}  # N x M, with M inputs
    exogenous_inputs::AbstractMatrix{Float64}  # M x T, with T time steps
    control_node::Int64
    initial_temperatures::AbstractVector{Float64}
    temperature_upper_bound_degC::Union{Real, Nothing}
    temperature_lower_bound_degC::Union{Real, Nothing}
    installed_cost::Float64</code></pre><p>Every model with <code>FlexibleHVAC</code> includes a preprocessing step to calculate the business-as-usual (BAU) cost of meeting the thermal loads using a dead-band controller. The BAU cost is then used in the  binary decision for purchasing the <code>FlexibleHVAC</code> system: if the <code>FlexibleHVAC</code> system is purchased then the heating and cooling costs are determined by the HVAC dispatch that minimizes the lifecycle cost of energy. If the <code>FlexibleHVAC</code> system is not purchased then the BAU heating and cooling costs must be paid.</p><p>There are two construction methods for <code>FlexibleHVAC</code>, which depend on whether or not the data was  loaded in from a JSON file. The issue with data from JSON is that the vector-of-vectors from the JSON  file must be appropriately converted to Julia Matrices. When loading in a Scenario from JSON that  includes a <code>FlexibleHVAC</code> model, if you include the <code>flex_hvac_from_json</code> argument to the <code>Scenario</code>  constructor then the conversion to Matrices will be done appropriately. </p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>At least one of the inputs for <code>temperature_upper_bound_degC</code> or <code>temperature_lower_bound_degC</code> must be provided to evaluate the <code>FlexibleHVAC</code> option. For example, if only <code>temperature_lower_bound_degC</code> is provided then only a heating system will be evaluated. Also, the heating system will only be used (or purchased) if the <code>exogenous_inputs</code> lead to the temperature at the <code>control_node</code> going below the <code>temperature_lower_bound_degC</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The <code>ExistingChiller</code> is electric and so its operating cost is determined by the <code>ElectricTariff</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The <code>ExistingBoiler</code> default operating cost is zero. Please provide the <code>fuel_cost_per_mmbtu</code> field for the <code>ExistingBoiler</code> if you want non-zero BAU heating costs. The <code>fuel_cost_per_mmbtu</code> can be a scalar, a list of 12 monthly values, or a time series of values for every time step.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/flexible_hvac.jl#L40-L80">source</a></section></article><h2 id="ExistingChiller"><a class="docs-heading-anchor" href="#ExistingChiller">ExistingChiller</a><a id="ExistingChiller-1"></a><a class="docs-heading-anchor-permalink" href="#ExistingChiller" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.ExistingChiller" href="#REopt.ExistingChiller"><code>REopt.ExistingChiller</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>ExistingChiller</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    loads_kw_thermal::Vector{&lt;:Real},
    cop::Union{Real, Nothing} = nothing,
    max_thermal_factor_on_peak_load::Real=1.25</code></pre><div class="admonition is-info"><header class="admonition-header">Max ExistingChiller size</header><div class="admonition-body"><p>The maximum size [kW] of the <code>ExistingChiller</code> will be set based on the peak thermal load as follows:</p><pre><code class="language-julia">max_kw = maximum(loads_kw_thermal) * max_thermal_factor_on_peak_load</code></pre></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/existing_chiller.jl#L30-L43">source</a></section></article><h2 id="GHP"><a class="docs-heading-anchor" href="#GHP">GHP</a><a id="GHP-1"></a><a class="docs-heading-anchor-permalink" href="#GHP" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.GHP" href="#REopt.GHP"><code>REopt.GHP</code></a> — <span class="docstring-category">Type</span></header><section><div><p>GHP evaluations typically require the <code>GhpGhx.jl</code> package to be loaded unless the <code>GhpGhx.jl</code> package  was already used externally to create <code>inputs_dict[&quot;GHP&quot;][&quot;ghpghx_responses&quot;]</code>. See the Home page under  &quot;Additional package loading for GHP&quot; for instructions. This <code>GHP</code> struct uses the response from <code>GhpGhx.jl</code> to process input parameters for REopt including additional cost parameters for <code>GHP</code>.</p><pre><code class="language-none">GHP</code></pre><p>struct with outer constructor:</p><pre><code class="language-julia">    require_ghp_purchase::Union{Bool, Int64} = false  # 0 = false, 1 = true
    installed_cost_heatpump_per_ton::Float64 = 1075.0
    heatpump_capacity_sizing_factor_on_peak_load::Float64 = 1.1
    installed_cost_ghx_per_ft::Float64 = 14.0
    installed_cost_building_hydronic_loop_per_sqft = 1.70
    om_cost_per_sqft_year::Float64 = -0.51
    building_sqft::Float64 # Required input
    space_heating_efficiency_thermal_factor::Float64 = NaN  # Default depends on building and location
    cooling_efficiency_thermal_factor::Float64 = NaN # Default depends on building and location
    ghpghx_response::Dict = Dict()
    can_serve_dhw::Bool = false

    macrs_option_years::Int = 5
    macrs_bonus_fraction::Float64 = 1.0
    macrs_itc_reduction::Float64 = 0.5
    federal_itc_fraction::Float64 = 0.1
    federal_rebate_per_ton::Float64 = 0.0
    federal_rebate_per_kw::Float64 = 0.0
    state_ibi_fraction::Float64 = 0.0
    state_ibi_max::Float64 = 1.0e10
    state_rebate_per_ton::Float64 = 0.0
    state_rebate_per_kw::Float64 = 0.0
    state_rebate_max::Float64 = 1.0e10
    utility_ibi_fraction::Float64 = 0.0
    utility_ibi_max::Float64 = 1.0e10
    utility_rebate_per_ton::Float64 = 0.0
    utility_rebate_per_kw::Float64 = 0.0
    utility_rebate_max::Float64 = 1.0e10

    # Processed data from inputs and results of GhpGhx.jl
    heating_thermal_kw::Vector{Float64} = []
    cooling_thermal_kw::Vector{Float64} = []
    yearly_electric_consumption_kw::Vector{Float64} = []
    peak_combined_heatpump_thermal_ton::Float64 = NaN

    # Intermediate parameters for cost processing
    tech_sizes_for_cost_curve::Union{Float64, AbstractVector{Float64}} = NaN
    installed_cost_per_kw::Union{Float64, AbstractVector{Float64}} = NaN
    heatpump_capacity_ton::Float64 = NaN

    # Process and populate these parameters needed more directly by the model
    installed_cost::Float64 = NaN
    om_cost_year_one::Float64 = NaN</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/ghp.jl#L32-L86">source</a></section></article><h2 id="SteamTurbine"><a class="docs-heading-anchor" href="#SteamTurbine">SteamTurbine</a><a id="SteamTurbine-1"></a><a class="docs-heading-anchor-permalink" href="#SteamTurbine" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.SteamTurbine" href="#REopt.SteamTurbine"><code>REopt.SteamTurbine</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>SteamTurbine</code> is an optional REopt input with the following keys and default values:</p><pre><code class="language-julia">    size_class::Union{Int64, Nothing} = nothing
    min_kw::Float64 = 0.0
    max_kw::Float64 = 0.0
    electric_produced_to_thermal_consumed_ratio::Float64 = NaN
    thermal_produced_to_thermal_consumed_ratio::Float64 = NaN
    is_condensing::Bool = false
    inlet_steam_pressure_psig::Float64 = NaN
    inlet_steam_temperature_degF::Float64 = NaN
    inlet_steam_superheat_degF::Float64 = 0.0
    outlet_steam_pressure_psig::Float64 = NaN
    outlet_steam_min_vapor_fraction::Float64 = 0.8  # Minimum practical vapor fraction of steam at the exit of the steam turbine
    isentropic_efficiency::Float64 = NaN
    gearbox_generator_efficiency::Float64 = NaN  # Combined gearbox (if applicable) and electric motor/generator efficiency
    net_to_gross_electric_ratio::Float64 = NaN  # Efficiency factor to account for auxiliary loads such as pumps, controls, lights, etc
    installed_cost_per_kw::Float64 = NaN   # Installed cost based on electric power capacity
    om_cost_per_kw::Float64 = 0.0  # Fixed O&amp;M cost based on electric power capacity
    om_cost_per_kwh::Float64 = NaN  # Variable O&amp;M based on electric energy produced

    can_net_meter::Bool = false
    can_wholesale::Bool = false
    can_export_beyond_nem_limit::Bool = false
    can_curtail::Bool = false

    macrs_option_years::Int = 0
    macrs_bonus_fraction::Float64 = 1.0    </code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/d8787b7c7df4bf63e90992db623ccb21249f2554/src/core/steam_turbine.jl#L31-L61">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/">« Examples</a><a class="docs-footer-nextpage" href="../outputs/">Outputs »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 21 November 2022 21:29">Monday 21 November 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
